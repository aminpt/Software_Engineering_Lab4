<div dir="rtl">

# بررسی و رفع خطای Undefined در Scenario Outline (Cucumber)

## 1. تشخیص مورد تست Undefined

در هنگام اجرای **Scenario Outline** در انتهای آزمایش ۱، یکی از موارد تست به وضعیت **undefined** برخورد می‌کند.

این مورد تست مربوط به ردیفی از جدول `Examples` است که مقدار ورودی زیر را دارد:

- `first = -1`

---

## 2. علت بروز مشکل

علت بروز این مشکل به نحوه استفاده از عبارت منظم (Regex) در فایل `MyStepdefs.java` مربوط می‌شود.

در این فایل، برای شناسایی اعداد در سناریوها از الگوی زیر استفاده شده است:

(\\\d+)


عبارت منظم `\\d` در زبان جاوا فقط اعداد مثبت (Digit) را شامل می‌شود و علامت منفی را پشتیبانی نمی‌کند.

از آنجایی که در جدول `Examples` مقدار `-1` وجود دارد، این عدد با الگوی `(\\d+)` مطابقت ندارد.  
در نتیجه، **Cucumber نمی‌تواند متد متناظر با این گام را پیدا کند** و آن را به‌صورت `undefined` تشخیص می‌دهد.

---

## 3. نحوه رفع مشکل با تغییر کد

برای رفع این مشکل، باید عبارت منظم به‌گونه‌ای تغییر داده شود که **اعداد منفی را نیز پشتیبانی کند**.

### تغییر در الگوی Regex

الگوی قبلی: (\\\\d+)


الگوی اصلاح‌شده: (-?\\\\d+)


در این الگو، `-?` به این معناست که وجود علامت منفی اختیاری است.

---


## 4. کدهای اصلاح‌شده در فایل MyStepdefs.java

### 4.1 کد قبلی (دارای خطا برای اعداد منفی)

```java
@Given("^Two input values, (\\d+) and (\\d+)$")
```

### 4.2 کد اصلاح‌شده برای ورودی‌ها


```java
@Given("^Two input values, (-?\\d+) and (-?\\d+)$")
public void twoInputValuesAnd(int arg0, int arg1) {
    // dummy
}
```

### 4.3 کد اصلاح‌شده برای بررسی نتیجه

```java
@Then("^I expect the result (-?\\d+)$")
public void iExpectTheResult(int arg0) {
    Assert.assertEquals(arg0, result);
}
```

</div>
